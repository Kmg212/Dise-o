---
title: "Estadística descriptiva"
subtitle: "Aplicación con R y RStudio"
author: "Kenedith Méndez - Gutiérrez"
format: 
  html:
    toc: true
    toc-expand: true
    code-fold: show
    toc-location: left
    toc-title: "Tabla de contenido"
    highlight-style: ayu-mirage
    theme: styles22.scss
    number-sections: true
    code-copy: true
knitr:
  opts_chunk:
    echo: true          
    eval: true          
    warning: false      
    message: false      
    fig.align: "center"
    fig.height: 6
    fig.width: 6.5 
editor: visual
---
# Introducción.

## ¿Qué es R?
::: columns
::: {.column width="60%"}
R es un lenguaje de programación y un entorno de ejecución de diseña para el análisis estadístico de datos ofreciendo un sistema cálculo estadístico y de gráficos.

Muchos profesionales utilizan R en su trabajo, y el lenguaje se emplea en diversos campos entre los que se encuentran las ciencias y el mundo académico.
:::

::: {.column width="40%"}
![](https://download.logo.wine/logo/R_(programming_language)/R_(programming_language)-Logo.wine.png){fig-align="center" width="230"}
:::
:::

## ¿Partes de la Interfaz de RStudio?

RStudio es un entorno de desarrollo integrado (IDE) para R.

![Interfaz de RStudio tomada de (Capítulo 1 R Básico, n.d.)](https://arcruz0.github.io/libroadp/00-images/basic-r/rstudio.png){fig-align="center" width="850"}

## Crear documentos en R tipo [`.qmd`]{.orange}.

1.  Abrir RStudio

2.  Ir a "New File" ![](images/NewFile.png.jpg){width="20" height="19"} \> "Quarto Document" ![](images/DQmd.png){width="20"}.

3.  Identificar el documento.

4.  Elegir el tipo de documento y dar clic en ![](images/Create.PNG){width="35" height="18"}.

5.  Construye el documento.

6.  Guardar y renderizar ![](images/Render.png){width="20"}

::: callout-note
## Información adicional.

Para profundizar ir a: [Tutorial: Hello, Quarto](https://quarto.org/docs/get-started/hello/rstudio.html)
:::

## Instalación de librerías.

```{r, eval=FALSE}
# Para manipulación de datos y gráficos
install.packages("tidyverse") 
# Para resúmenes descriptivos
install.packages("descriptr") 
# Para importar datos desde excel.
install.packages("readxl")
# Para gráficos.
install.packages("ggplot2")
# Para salidas de tablas.
install.packages("kableExtra")
```

## Cargar librerías.

```{r}
library(tidyverse)
library(descriptr)
library(readxl)
library(ggplot2)
library(kableExtra)
```

# Práctica en clase.
## Contexto de los datos.

::: columns
::: {.column width="50%"}
El conjunto de datos a emplear contiene información recopilada durante un estudio de campo sobre la abundancia de una especie invasora *Carcinus maenas*, conocido como el cangrejo verde europeo en distintos puntos costeros.
:::

::: {.column width="50%"}
![](https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/73f9150f-e79a-4896-acfd-dbf93eefe809/d9t4bv6-4f43681b-120c-49ba-8508-b242a84070e8.png/v1/fill/w_1069,h_748,q_70,strp/carcinus_maenas_by_renecampbellart_d9t4bv6-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTc1MCIsInBhdGgiOiJcL2ZcLzczZjkxNTBmLWU3OWEtNDg5Ni1hY2ZkLWRiZjkzZWVmZTgwOVwvZDl0NGJ2Ni00ZjQzNjgxYi0xMjBjLTQ5YmEtODUwOC1iMjQyYTg0MDcwZTgucG5nIiwid2lkdGgiOiI8PTI1MDAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.u6hx-Ve2Wg74ydJyDoL7GowXYa0IRt1ewpKlRnMdw_4){fig-align="center" width="200"}
:::
:::

## Variables.

-   ID: Identificación del punto de muestreo.
-   Location: Coordenadas del punto de muestreo.
-   Temperature (°C): Temperatura medida.
-   Salinity (ppt): Salinidad del agua.
-   pH: pH del agua.
-   Dissolved Oxygen (mg/L): Cantidad de oxígeno disuelto.
-   Nutrient Levels (mg/L): Indíce de niveles de nutrientes.
-   Abundance of Species : Cantidad de individuos de la especie.

# Paso a Paso - Estadística descriptiva.

## Paso 1. Importar datos desde Excel.

```{r}
#Definir el directorio de trabajo.
setwd("D:/Unimagdalena cursos/2024/2024II/Bio_Diseño Experimental/DiseñoR")
#Leer datos desde Excel.
A <- read_excel("Environmental_Data_Carcinus_maenas.xlsx")
head(A)
```

## Paso 2. Revisar y ajustar la estructura de los datos.

```{r}
#revisar
str(A)
#Ajustar variables cualitativas a factor
A$Localidad_ID<-as.factor(A$Localidad_ID)
```

## Paso 3. Generar resúmenes numéricos con el paquete [`descriptr`]{.orange}.

### Para las variables numéricas.

```{r}
ds_tidy_stats(data = A)%>% 
  kable(format ="html",digits = 2) %>% 
  kable_classic(font_size = 14)
```

### Para una variable numérica por una variable factor.

```{r}
ds_group_summary(data = A,
                 Localidad_ID, 
                 Dissolved_Oxygen)$tidy_stats %>% 
  kable(format ="html",digits = 2) %>% 
  kable_classic(font_size = 14)
```

## Paso 4. Crear tablas con el paquete [`descriptr`]{.orange}.

### Tablas para variables cuantitativas continuas.

::: callout-caution
## Recuerde.

1.  La variables cuantitativas continuas se organizan en tablas agrupadas por intervalos.
2.  Para calcular el numéro de intervalos se utiliza la regla de sturges, $k=1+3.322*log10(n)$ redondeado al entero más cercano.
:::

```{r}
1+3.322*log10(25)
```

```{r}
ds_freq_table(data = A, 
              variable = Abundance_of_Carcinus_maenas,
              bins = 6)$freq_data %>% 
  kable(format ="html",digits = 2) %>% 
  kable_classic(font_size = 14)
```

## Paso 5. Realizar gráficos con el paquete [`ggplot2`]{.orange}.

### Histogramas.

```{r, fig.height=4}
ggplot(data = A, aes(x = Temperature))+
  geom_histogram(bins = 6, fill="#fcd29f",color="black")+
  stat_bin(aes(label=after_stat(count)),
           geom="text",bins=6,vjust=-0.5)+ 
  theme_classic()
```

### Cajas y bigotes o boxplots.

```{r, fig.height=4}
ggplot(data = A,aes(x = Localidad_ID,y = Nutrient_Levels))+
  stat_boxplot(geom='errorbar', linetype=1, width=0.1)+
  geom_boxplot(fill="#fcd29f",color="black")+
  stat_summary(fun=mean, geom="point", size=3, shape=8)+
  theme_classic()
```

### De promedios con barras de error.

```{r, fig.height=4}
ggplot(data = A,aes(x = Localidad_ID ,y = Salinity))+
  geom_bar(fun=mean, stat = "summary", fill="#fcd29f",
           color="black",width=0.5)+
  stat_summary(fun = mean, width=0.1,geom = "errorbar",
             fun.max = function(x) mean(x)+sd(x)/sqrt(length(x)),
             fun.min = function(x) mean(x)-sd(x)/sqrt(length(x)))+
  theme_classic()
```

### Dispersión.
```{r, fig.width=10, fig.height=3}
ggplot(data = A, aes(x = Dissolved_Oxygen, 
                     y = Abundance_of_Carcinus_maenas))+
  geom_point(size=2.3, fill="#fcd29f", shape=21)+
  geom_smooth(formula = y~x, se = FALSE,span=2, 
              color="black",linewidth=0.5)+
  theme_bw()+ 
  facet_wrap(.~Localidad_ID,nrow = 1)
```

### Anexo. Barras simples.
```{r, fig.height=4}
ggplot(data = A,aes(x = Localidad_ID ,
                    y = Abundance_of_Carcinus_maenas))+
  geom_bar(fun=sum, stat = "summary", fill="#fcd29f",
           color="black",width=0.5)+
  geom_text(aes(label = after_stat(y)), stat = "summary",
            fun = sum, vjust=-0.5)+
  theme_classic()
```